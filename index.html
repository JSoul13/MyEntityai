# Create the complete Entity Paranormal AI app with Firebase Auth and Stripe
html_content = '''<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Entity: The Paranormal Evidence AI</title>
    <script src="https://unpkg.com/react@17/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@17/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    
    <!-- Firebase v9 SDK -->
    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js';
        import { getAuth } from 'https://www.gstatic.com/firebasejs/9.23.0/firebase-auth.js';
        import { getFirestore } from 'https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore.js';
        window.firebaseApp = initializeApp;
        window.firebaseAuth = getAuth;
        window.firebaseFirestore = getFirestore;
    </script>
    
    <!-- Firebase Compat for easier use -->
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
    
    <!-- Stripe -->
    <script src="https://js.stripe.com/v3/"></script>
    
    <style>
        body {
            background: #000000;
            min-height: 100vh;
            font-family: 'Courier New', monospace;
        }
        .horror-font {
            font-family: 'Creepster', 'Chiller', 'Nosifer', cursive;
            text-shadow: 0 0 10px #ff0080, 0 0 20px #ff0080, 0 0 30px #ff0080;
        }
        .neon-glow {
            box-shadow: 0 0 5px currentColor, 0 0 10px currentColor, 0 0 15px currentColor;
        }
        .loading-spinner {
            border: 2px solid #f3f3f3;
            border-top: 2px solid #8b5cf6;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div id="root"></div>
    <script type="text/babel">
        // Firebase Configuration - REPLACE WITH YOUR ACTUAL CONFIG
        const firebaseConfig = {
            apiKey: "AIzaSyB...", // REPLACE WITH YOUR ACTUAL API KEY
            authDomain: "entity-paranormal-ai.firebaseapp.com",
            projectId: "entity-paranormal-ai",
            storageBucket: "entity-paranormal-ai.appspot.com",
            messagingSenderId: "123456789", // REPLACE WITH YOUR ACTUAL SENDER ID
            appId: "1:123456789:web:abcdefg", // REPLACE WITH YOUR ACTUAL APP ID
            measurementId: "G-ABCDEFG" // REPLACE WITH YOUR ACTUAL MEASUREMENT ID
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.firestore();

        // Stripe Configuration - REPLACE WITH YOUR ACTUAL STRIPE KEY
        const stripe = Stripe("pk_test_YOUR_STRIPE_PUBLISHABLE_KEY"); // REPLACE WITH YOUR ACTUAL STRIPE KEY

        function App() {
            const [user, setUser] = React.useState(null);
            const [userProfile, setUserProfile] = React.useState(null);
            const [loading, setLoading] = React.useState(true);
            const [showAuth, setShowAuth] = React.useState(false);
            const [authMode, setAuthMode] = React.useState("login");
            const [email, setEmail] = React.useState("");
            const [password, setPassword] = React.useState("");
            const [authError, setAuthError] = React.useState("");
            const [authLoading, setAuthLoading] = React.useState(false);
            const [currentView, setCurrentView] = React.useState('dashboard');

            // Listen for authentication state changes
            React.useEffect(() => {
                const unsubscribe = auth.onAuthStateChanged(async (user) => {
                    setUser(user);
                    if (user) {
                        // Get user profile from Firestore
                        try {
                            const userDoc = await db.collection('users').doc(user.uid).get();
                            if (userDoc.exists) {
                                setUserProfile(userDoc.data());
                            } else {
                                // Create new user profile
                                const newProfile = {
                                    email: user.email,
                                    isPro: false,
                                    analysisCount: 0,
                                    createdAt: firebase.firestore.FieldValue.serverTimestamp(),
                                    lastAnalysisReset: firebase.firestore.FieldValue.serverTimestamp()
                                };
                                await db.collection('users').doc(user.uid).set(newProfile);
                                setUserProfile(newProfile);
                            }
                        } catch (error) {
                            console.error("Error fetching user profile:", error);
                        }
                    } else {
                        setUserProfile(null);
                    }
                    setLoading(false);
                });

                return () => unsubscribe();
            }, []);

            // Authentication handlers
            const handleLogin = async (e) => {
                e.preventDefault();
                setAuthLoading(true);
                setAuthError("");
                try {
                    await auth.signInWithEmailAndPassword(email, password);
                    setShowAuth(false);
                    setEmail("");
                    setPassword("");
                } catch (error) {
                    setAuthError(error.message);
                }
                setAuthLoading(false);
            };

            const handleRegister = async (e) => {
                e.preventDefault();
                setAuthLoading(true);
                setAuthError("");
                try {
                    await auth.createUserWithEmailAndPassword(email, password);
                    setShowAuth(false);
                    setEmail("");
                    setPassword("");
                } catch (error) {
                    setAuthError(error.message);
                }
                setAuthLoading(false);
            };

            const handleLogout = async () => {
                try {
                    await auth.signOut();
                    setCurrentView('dashboard');
                } catch (error) {
                    console.error("Error signing out:", error);
                }
            };

            // Stripe checkout for Pro subscription
            const handleUpgradeToPro = async () => {
                try {
                    // In a real app, you'd call your backend to create a Stripe Checkout session
                    // For now, we'll simulate the upgrade process
                    alert("Stripe integration: In a real app, this would redirect to Stripe Checkout for $19.99/month subscription.");
                    
                    // Simulate successful payment (remove this in production)
                    if (confirm("Simulate successful payment? (Click OK to upgrade to Pro)")) {
                        await db.collection('users').doc(user.uid).update({
                            isPro: true,
                            upgradedAt: firebase.firestore.FieldValue.serverTimestamp()
                        });
                        setUserProfile(prev => ({ ...prev, isPro: true }));
                    }
                } catch (error) {
                    console.error("Error upgrading to Pro:", error);
                    alert("Error upgrading to Pro. Please try again.");
                }
            };

            // Analysis function with limits
            const performAnalysis = async () => {
                if (!userProfile.isPro) {
                    // Check if user has reached free limit
                    if (userProfile.analysisCount >= 3) {
                        alert("You've reached your free analysis limit (3 per month). Upgrade to Pro for unlimited analysis!");
                        return;
                    }
                    
                    // Increment analysis count for free users
                    await db.collection('users').doc(user.uid).update({
                        analysisCount: firebase.firestore.FieldValue.increment(1)
                    });
                    setUserProfile(prev => ({ ...prev, analysisCount: prev.analysisCount + 1 }));
                }
                
                // Simulate analysis
                alert("Analysis started! (This would trigger your AI analysis in the real app)");
                setCurrentView('analysis');
            };

            // Enhanced Ghost Logo Component
            const EntityLogo = ({ size = "text-2xl" }) => (
                <div className="flex items-center space-x-3">
                    <div className="relative">
                        <svg width="60" height="60" viewBox="0 0 60 60" className="drop-shadow-lg">
                            {/* Neon Yellow Halo */}
                            <ellipse cx="30" cy="15" rx="25" ry="4" fill="none" stroke="#ffff00" strokeWidth="2" className="neon-glow" style={{filter: 'drop-shadow(0 0 8px #ffff00)'}} />
                            
                            {/* Ghost body - bigger and white */}
                            <path d="M30 20 C20 20, 15 25, 15 35 L15 50 L20 45 L25 50 L30 45 L35 50 L40 45 L45 50 L45 35 C45 25, 40 20, 30 20 Z" fill="white" stroke="rgba(255,255,255,0.3)" strokeWidth="1"/>
                            
                            {/* Neon Pink Devil horns */}
                            <path d="M22 18 L20 12 L24 15 Z" fill="#ff0080" className="neon-glow" style={{filter: 'drop-shadow(0 0 6px #ff0080)'}} />
                            <path d="M38 18 L40 12 L36 15 Z" fill="#ff0080" className="neon-glow" style={{filter: 'drop-shadow(0 0 6px #ff0080)'}} />
                            
                            {/* Eyes */}
                            <circle cx="25" cy="30" r="3" fill="black" />
                            <circle cx="35" cy="30" r="3" fill="black" />
                            
                            {/* Mouth */}
                            <ellipse cx="30" cy="38" rx="4" ry="6" fill="black" />
                        </svg>
                    </div>
                    <span className={`${size} font-bold horror-font text-white`}>
                        ENTITY
                    </span>
                </div>
            );

            // Loading screen
            if (loading) {
                return (
                    <div className="min-h-screen bg-black flex items-center justify-center">
                        <div className="text-center">
                            <EntityLogo size="text-4xl" />
                            <div className="mt-4 loading-spinner mx-auto"></div>
                            <p className="text-purple-300 mt-2">Loading...</p>
                        </div>
                    </div>
                );
            }

            // Authentication screen for non-logged-in users
            if (!user) {
                return (
                    <div className="min-h-screen bg-black flex items-center justify-center">
                        <div className="text-center max-w-md mx-auto p-8">
                            <EntityLogo size="text-4xl" />
                            <h1 className="text-3xl font-bold text-white mt-6 mb-4">
                                Welcome to Entity
                            </h1>
                            <p className="text-gray-300 mb-8">
                                Advanced AI-Powered Paranormal Evidence Analysis. 
                                Create an account to start analyzing paranormal evidence.
                            </p>
                            
                            <div className="space-y-4">
                                <button
                                    onClick={() => { setShowAuth(true); setAuthMode("login"); }}
                                    className="w-full bg-purple-600 hover:bg-purple-700 text-white py-3 px-6 rounded-lg font-semibold transition-all"
                                >
                                    Sign In
                                </button>
                                <button
                                    onClick={() => { setShowAuth(true); setAuthMode("register"); }}
                                    className="w-full bg-pink-600 hover:bg-pink-700 text-white py-3 px-6 rounded-lg font-semibold transition-all"
                                >
                                    Create Account
                                </button>
                            </div>

                            {/* Authentication Modal */}
                            {showAuth && (
                                <div className="fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 p-4">
                                    <div className="bg-gray-900 p-8 rounded-lg shadow-lg w-full max-w-md">
                                        <h2 className="text-2xl font-bold text-white mb-6">
                                            {authMode === "login" ? "Sign In" : "Create Account"}
                                        </h2>
                                        
                                        <form onSubmit={authMode === "login" ? handleLogin : handleRegister}>
                                            <div className="space-y-4">
                                                <input
                                                    type="email"
                                                    placeholder="Email"
                                                    value={email}
                                                    onChange={(e) => setEmail(e.target.value)}
                                                    className="w-full px-4 py-3 bg-gray-800 border border-gray-600 rounded-lg text-white focus:outline-none focus:border-purple-500"
                                                    required
                                                />
                                                <input
                                                    type="password"
                                                    placeholder="Password"
                                                    value={password}
                                                    onChange={(e) => setPassword(e.target.value)}
                                                    className="w-full px-4 py-3 bg-gray-800 border border-gray-600 rounded-lg text-white focus:outline-none focus:border-purple-500"
                                                    required
                                                />
                                            </div>
                                            
                                            {authError && (
                                                <div className="mt-4 p-3 bg-red-900 bg-opacity-50 border border-red-500 rounded text-red-300 text-sm">
                                                    {authError}
                                                </div>
                                            )}
                                            
                                            <div className="mt-6 space-y-3">
                                                <button
                                                    type="submit"
                                                    disabled={authLoading}
                                                    className="w-full bg-purple-600 hover:bg-purple-700 text-white py-3 px-6 rounded-lg font-semibold transition-all disabled:opacity-50 flex items-center justify-center"
                                                >
                                                    {authLoading ? (
                                                        <>
                                                            <div className="loading-spinner mr-2"></div>
                                                            {authMode === "login" ? "Signing In..." : "Creating Account..."}
                                                        </>
                                                    ) : (
                                                        authMode === "login" ? "Sign In" : "Create Account"
                                                    )}
                                                </button>
                                                
                                                <button
                                                    type="button"
                                                    onClick={() => setAuthMode(authMode === "login" ? "register" : "login")}
                                                    className="w-full text-purple-300 hover:text-purple-200 py-2 transition-all"
                                                >
                                                    {authMode === "login" ? "Need an account? Sign up" : "Already have an account? Sign in"}
                                                </button>
                                                
                                                <button
                                                    type="button"
                                                    onClick={() => setShowAuth(false)}
                                                    className="w-full text-gray-400 hover:text-gray-300 py-2 transition-all"
                                                >
                                                    Cancel
                                                </button>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            )}
                        </div>
                    </div>
                );
            }

            // Main app navigation
            const Navigation = () => (
                <nav className="bg-black bg-opacity-50 backdrop-blur-sm border-b border-purple-500 sticky top-0 z-50">
                    <div className="container mx-auto px-4 py-4 flex justify-between items-center">
                        <EntityLogo />
                        <div className="hidden md:flex items-center space-x-4">
                            <span className="text-purple-300 text-sm">Welcome, {user.email}</span>
                            {userProfile && (
                                <span className={`px-3 py-1 rounded-full text-xs font-semibold ${
                                    userProfile.isPro ? 'bg-green-600 text-white' : 'bg-yellow-600 text-black'
                                }`}>
                                    {userProfile.isPro ? 'PRO' : `FREE (${userProfile.analysisCount}/3)`}
                                </span>
                            )}
                        </div>
                        <div className="flex items-center space-x-2">
                            {['dashboard', 'upload', 'analysis'].map(view => (
                                <button
                                    key={view}
                                    onClick={() => setCurrentView(view)}
                                    className={`px-4 py-2 rounded transition-all ${
                                        currentView === view
                                            ? 'bg-pink-500 text-white shadow-lg shadow-pink-500/50'
                                            : 'text-gray-300 hover:text-pink-400 hover:bg-gray-900'
                                    }`}
                                >
                                    {view.charAt(0).toUpperCase() + view.slice(1)}
                                </button>
                            ))}
                            <button
                                onClick={handleLogout}
                                className="px-4 py-2 rounded text-gray-300 hover:text-red-400 hover:bg-gray-900 transition-all"
                            >
                                Logout
                            </button>
                        </div>
                    </div>
                </nav>
            );

            // Dashboard view
            const Dashboard = () => (
                <div className="space-y-8">
                    <div className="text-center py-12">
                        <h1 className="text-5xl font-bold mb-4 bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text text-transparent">
                            Entity Core Dashboard
                        </h1>
                        <p className="text-xl text-gray-300 max-w-3xl mx-auto">
                            Advanced AI-Powered Paranormal Evidence Analysis
                        </p>
                    </div>

                    {/* User Status Card */}
                    <div className="bg-gray-900 bg-opacity-50 p-6 rounded-lg border border-gray-700 max-w-2xl mx-auto">
                        <h3 className="text-xl font-semibold mb-4 text-purple-300">Your Account Status</h3>
                        <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <span className="text-gray-400">Plan:</span>
                                <p className={`text-lg font-bold ${userProfile?.isPro ? 'text-green-400' : 'text-yellow-400'}`}>
                                    {userProfile?.isPro ? 'PRO MEMBER' : 'FREE MEMBER'}
                                </p>
                            </div>
                            <div>
                                <span className="text-gray-400">Analyses Used:</span>
                                <p className="text-lg font-bold text-white">
                                    {userProfile?.isPro ? 'Unlimited' : `${userProfile?.analysisCount || 0}/3 this month`}
                                </p>
                            </div>
                        </div>
                        
                        {!userProfile?.isPro && (
                            <div className="mt-6 p-4 bg-gradient-to-r from-purple-900 to-pink-900 rounded-lg border border-purple-500">
                                <h4 className="font-semibold mb-2">Upgrade to Entity Pro</h4>
                                <p className="text-sm text-gray-300 mb-4">
                                    Get unlimited analysis, priority support, and access to all premium features for just $19.99/month.
                                </p>
                                <button
                                    onClick={handleUpgradeToPro}
                                    className="bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white px-6 py-2 rounded-lg font-semibold transition-all"
                                >
                                    Upgrade to Pro - $19.99/month
                                </button>
                            </div>
                        )}
                    </div>

                    {/* Quick Actions */}
                    <div className="grid grid-cols-1 md:grid-cols-3 gap-6 max-w-4xl mx-auto">
                        <div className="bg-gray-900 bg-opacity-50 p-6 rounded-lg border border-gray-700 text-center">
                            <div className="text-4xl mb-4">📁</div>
                            <h3 className="text-lg font-semibold mb-2">Upload Evidence</h3>
                            <p className="text-gray-400 text-sm mb-4">Upload your paranormal evidence for AI analysis</p>
                            <button
                                onClick={() => setCurrentView('upload')}
                                className="bg-purple-500 hover:bg-purple-600 text-white px-4 py-2 rounded transition-all"
                            >
                                Upload Now
                            </button>
                        </div>
                        
                        <div className="bg-gray-900 bg-opacity-50 p-6 rounded-lg border border-gray-700 text-center">
                            <div className="text-4xl mb-4">🔍</div>
                            <h3 className="text-lg font-semibold mb-2">Start Analysis</h3>
                            <p className="text-gray-400 text-sm mb-4">Analyze your evidence with our AI</p>
                            <button
                                onClick={performAnalysis}
                                className="bg-pink-500 hover:bg-pink-600 text-white px-4 py-2 rounded transition-all"
                                disabled={!userProfile?.isPro && userProfile?.analysisCount >= 3}
                            >
                                {!userProfile?.isPro && userProfile?.analysisCount >= 3 ? 'Limit Reached' : 'Analyze'}
                            </button>
                        </div>
                        
                        <div className="bg-gray-900 bg-opacity-50 p-6 rounded-lg border border-gray-700 text-center">
                            <div className="text-4xl mb-4">📊</div>
                            <h3 className="text-lg font-semibold mb-2">View Results</h3>
                            <p className="text-gray-400 text-sm mb-4">Review your analysis results</p>
                            <button
                                onClick={() => setCurrentView('analysis')}
                                className="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded transition-all"
                            >
                                View Results
                            </button>
                        </div>
                    </div>
                </div>
            );

            // Upload view
            const UploadView = () => (
                <div className="space-y-8 max-w-4xl mx-auto">
                    <div className="text-center">
                        <h1 className="text-4xl font-bold mb-4 text-purple-300">Evidence Upload</h1>
                        <p className="text-gray-300">Upload your paranormal evidence for AI analysis</p>
                    </div>

                    <div className="bg-gray-900 bg-opacity-50 p-8 rounded-lg border border-gray-700 text-center">
                        <div className="text-6xl mb-4">📁</div>
                        <h3 className="text-2xl font-semibold mb-4">Upload Your Evidence</h3>
                        <p className="text-gray-400 mb-6">Drag and drop files or click to browse</p>
                        
                        <input 
                            type="file" 
                            multiple 
                            accept="video/*,audio/*,image/*" 
                            className="hidden" 
                            id="file-upload"
                        />
                        <label 
                            htmlFor="file-upload" 
                            className="bg-purple-500 hover:bg-purple-600 text-white px-8 py-3 rounded-lg font-semibold cursor-pointer transition-all inline-block"
                        >
                            Select Files
                        </label>
                        
                        <div className="mt-6 p-4 bg-yellow-900 bg-opacity-30 rounded border border-yellow-500">
                            <p className="text-yellow-300 text-sm">
                                {userProfile?.isPro ? 
                                    "Pro Member: Upload unlimited files" : 
                                    `Free Member: ${3 - (userProfile?.analysisCount || 0)} analyses remaining this month`
                                }
                            </p>
                        </div>
                    </div>
                </div>
            );

            // Analysis view
            const AnalysisView = () => (
                <div className="space-y-8 max-w-4xl mx-auto">
                    <div className="text-center">
                        <h1 className="text-4xl font-bold mb-4 text-purple-300">Analysis Results</h1>
                        <p className="text-gray-300">AI-powered paranormal evidence analysis</p>
                    </div>

                    <div className="bg-gray-900 bg-opacity-50 p-8 rounded-lg border border-gray-700 text-center">
                        <div className="text-6xl mb-4">🔮</div>
                        <h3 className="text-2xl font-semibold mb-4">Entity AI Analysis</h3>
                        <p className="text-gray-400 mb-6">
                            {userProfile?.isPro ? 
                                "Pro analysis with unlimited features" : 
                                "Basic analysis (upgrade to Pro for advanced features)"
                            }
                        </p>
                        
                        <button
                            onClick={performAnalysis}
                            className="bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white px-8 py-3 rounded-lg font-semibold transition-all"
                            disabled={!userProfile?.isPro && userProfile?.analysisCount >= 3}
                        >
                            {!userProfile?.isPro && userProfile?.analysisCount >= 3 ? 
                                'Upgrade to Pro for More Analysis' : 
                                'Start New Analysis'
                            }
                        </button>
                    </div>
                </div>
            );

            // Render current view
            const renderCurrentView = () => {
                switch(currentView) {
                    case 'upload': return <UploadView />;
                    case 'analysis': return <AnalysisView />;
                    default: return <Dashboard />;
                }
            };

            // Main app layout
            return (
                <div className="min-h-screen bg-black text-white">
                    <Navigation />
                    <main className="container mx-auto px-4 py-8">
                        {renderCurrentView()}
                    </main>
                </div>
            );
        }

        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>'''

# Write the file
with open('index_with_auth.html', 'w', encoding='utf-8') as f:
    f.write(html_content)

print("✅ Complete Entity Paranormal AI app with Firebase Auth and Stripe created!")
print("📁 File saved as: index_with_auth.html")
print("\n🔧 IMPORTANT: You need to replace these placeholders:")
print("1. Firebase config values (apiKey, authDomain, etc.)")
print("2. Stripe publishable key")
print("\n🚀 Features included:")
print("✅ User registration/login required")
print("✅ Free users: 3 analyses per month")
print("✅ Pro users: Unlimited analyses ($19.99/month)")
print("✅ Firestore database integration")
print("✅ Stripe payment integration")
print("✅ User profile management")
print("✅ Feature gating based on subscription")
