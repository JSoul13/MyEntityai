<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Entity: The Paranormal Evidence AI</title>
    <script src="https://unpkg.com/react@17/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@17/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
    <script src="https://js.stripe.com/v3/"></script>
    <style>
        body {
            background: #000000;
            min-height: 100vh;
            font-family: 'Inter', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        .ai-title {
            font-size: 2.5rem;
            font-weight: 700;
            color: #e5e7eb;
            letter-spacing: 0.05em;
        }
        .professional-card {
            background: linear-gradient(135deg, rgba(17, 24, 39, 0.95), rgba(31, 41, 55, 0.9));
            backdrop-filter: blur(10px);
            border: 1px solid rgba(139, 92, 246, 0.2);
        }
        .feature-card {
            background: linear-gradient(135deg, rgba(31, 41, 55, 0.8), rgba(17, 24, 39, 0.9));
            border: 1px solid rgba(75, 85, 99, 0.3);
            transition: all 0.3s ease;
        }
        .feature-card:hover {
            border-color: rgba(139, 92, 246, 0.5);
            transform: translateY(-2px);
        }
        .ghost-logo {
            filter: drop-shadow(0 0 15px rgba(139, 92, 246, 0.3));
        }
        .form-field {
            background: rgba(31, 41, 55, 0.8);
            border: 1px solid rgba(75, 85, 99, 0.5);
            transition: all 0.3s ease;
        }
        .form-field:focus {
            border-color: #8b5cf6;
            box-shadow: 0 0 0 2px rgba(139, 92, 246, 0.1);
            background: rgba(31, 41, 55, 0.95);
        }
        .loading-spinner {
            border: 2px solid #374151;
            border-top: 2px solid #8b5cf6;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .premium-badge {
            background: linear-gradient(45deg, #f59e0b, #d97706);
            color: white;
            font-size: 0.75rem;
            font-weight: 600;
            padding: 0.25rem 0.5rem;
            border-radius: 0.375rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }
        .pro-badge {
            background: linear-gradient(45deg, #10b981, #059669);
            color: white;
            font-size: 0.75rem;
            font-weight: 600;
            padding: 0.25rem 0.5rem;
            border-radius: 0.375rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }
        .paywall-modal {
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(5px);
        }
        #error-container {
            color: #f87171;
            font-size: 14px;
            margin: 12px;
            padding: 10px;
            border-radius: 8px;
            background-color: rgba(239, 68, 68, 0.1);
            border: 1px solid rgba(239, 68, 68, 0.3);
            display: none;
        }
    </style>
</head>
<body>
    <div id="root"></div>
    <div id="error-container"></div>
    <script type="text/babel">
        // Firebase config
        const firebaseConfig = {
            apiKey: "AIzaSyCa_L8Hf-HpOucA09fF14kECmyGNy7mNz0",
            authDomain: "entity-paranormal-ai.firebaseapp.com",
            databaseURL: "https://entity-paranormal-ai-default-rtdb.firebaseio.com",
            projectId: "entity-paranormal-ai",
            storageBucket: "entity-paranormal-ai.firebasestorage.app",
            messagingSenderId: "194851934791",
            appId: "1:194851934791:web:62b84d19b0ba6088bf1762",
            measurementId: "G-K1536GWN62"
        };
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.firestore();
        const stripe = Stripe("pk_live_51RcjDXJnh7g2pvRQN6qjFRBEB3SxiTdzrgijbrslDy4G2XbGSHBpOAhKZ8G7U3rSGGmbpQCqM8hZmcxZx1mYpBrv00iVexVeNG");

        const DEMO_PRO_EMAIL = "prodemo@entityai.com";
        const DEMO_PRO_PASS = "EntityPro123!";

        function App() {
            const [user, setUser] = React.useState(null);
            const [userProfile, setUserProfile] = React.useState(null);
            const [loading, setLoading] = React.useState(true);
            const [showAuth, setShowAuth] = React.useState(false);
            const [authMode, setAuthMode] = React.useState("login");
            const [email, setEmail] = React.useState("");
            const [password, setPassword] = React.useState("");
            const [firstName, setFirstName] = React.useState("");
            const [lastName, setLastName] = React.useState("");
            const [phone, setPhone] = React.useState("");
            const [backupContact, setBackupContact] = React.useState("");
            const [authError, setAuthError] = React.useState("");
            const [authLoading, setAuthLoading] = React.useState(false);
            const [currentView, setCurrentView] = React.useState('dashboard');
            const [uploadedFiles, setUploadedFiles] = React.useState([]);
            const [analysisResults, setAnalysisResults] = React.useState(null);
            const [isAnalyzing, setIsAnalyzing] = React.useState(false);
            const [showPaywall, setShowPaywall] = React.useState(false);
            const [paywallAction, setPaywallAction] = React.useState("");
            const [selectedLocation, setSelectedLocation] = React.useState(null);

            // Mock data
            const mockCases = [
                {
                    id: 1,
                    name: "Abandoned Hospital Investigation",
                    date: "2024-06-15",
                    location: "St. Mary's Hospital, Salem",
                    anomalies: 7,
                    evps: 3,
                    status: "analyzed",
                    collaborators: ["@GhostHunter92", "@ParanormalPro"],
                    isPublic: true,
                    description: "Comprehensive investigation of the abandoned St. Mary's Hospital revealed significant paranormal activity including shadow figures, EVP recordings, and unexplained temperature fluctuations."
                },
                {
                    id: 2,
                    name: "Cemetery Midnight Session",
                    date: "2024-06-10",
                    location: "Greenlawn Cemetery",
                    anomalies: 12,
                    evps: 5,
                    status: "processing",
                    collaborators: ["@SpiritSeeker"],
                    isPublic: false,
                    description: "Late-night investigation at historic cemetery with multiple EVP captures and electromagnetic anomalies detected near older grave sites."
                },
                {
                    id: 3,
                    name: "Victorian Mansion Study",
                    date: "2024-06-08",
                    location: "Blackwood Manor, Boston",
                    anomalies: 15,
                    evps: 8,
                    status: "analyzed",
                    collaborators: ["@ParanormalPro", "@GhostDetective"],
                    isPublic: true,
                    description: "Multi-day investigation of 1800s Victorian mansion with documented history of unexplained deaths and ongoing paranormal reports."
                }
            ];

            const mockHauntedLocations = [
                {
                    id: 1,
                    name: "Eastern State Penitentiary",
                    location: "Philadelphia, PA",
                    activityLevel: "High",
                    evidenceCount: 47,
                    investigators: 23,
                    lastActivity: "2 hours ago",
                    description: "Historic prison with intense paranormal activity including shadow figures, disembodied voices, and cell door slamming.",
                    recentEvidence: ["Shadow figure in Cell Block 12", "EVP: 'Get out'", "Temperature drop of 15Â°F"]
                },
                {
                    id: 2,
                    name: "Waverly Hills Sanatorium",
                    location: "Louisville, KY",
                    activityLevel: "Extreme",
                    evidenceCount: 89,
                    investigators: 41,
                    lastActivity: "30 minutes ago",
                    description: "Former tuberculosis hospital, one of the most haunted places in America with documented full-body apparitions.",
                    recentEvidence: ["Full body apparition in Room 502", "Multiple EVPs recorded", "Doors slamming shut"]
                },
                {
                    id: 3,
                    name: "Tower of London",
                    location: "London, UK",
                    activityLevel: "High",
                    evidenceCount: 34,
                    investigators: 18,
                    lastActivity: "1 day ago",
                    description: "Historic castle with centuries of paranormal reports including the famous Anne Boleyn sightings.",
                    recentEvidence: ["Anne Boleyn sighting", "Phantom footsteps", "Cold spots in Bloody Tower"]
                }
            ];

            React.useEffect(() => {
                const unsubscribe = auth.onAuthStateChanged(async (user) => {
                    setUser(user);
                    if (user) {
                        if (user.email === DEMO_PRO_EMAIL) {
                            setUserProfile({
                                firstName: "Demo",
                                lastName: "Pro",
                                email: DEMO_PRO_EMAIL,
                                isPro: true,
                                analysisCount: 0
                            });
                        } else {
                            try {
                                const userDoc = await db.collection('users').doc(user.uid).get();
                                if (userDoc.exists) {
                                    setUserProfile(userDoc.data());
                                } else {
                                    setUserProfile({
                                        firstName: user.email.split('@')[0],
                                        lastName: "",
                                        email: user.email,
                                        isPro: false,
                                        analysisCount: 0
                                    });
                                }
                            } catch (error) {
                                setUserProfile({
                                    firstName: user.email.split('@')[0],
                                    lastName: "",
                                    email: user.email,
                                    isPro: false,
                                    analysisCount: 0
                                });
                            }
                        }
                    } else {
                        setUserProfile(null);
                    }
                    setLoading(false);
                });
                return () => unsubscribe();
            }, []);

            const clearForm = () => {
                setEmail(""); setPassword(""); setFirstName(""); setLastName(""); setPhone(""); setBackupContact(""); setAuthError("");
            };

            const handleLogin = async (e) => {
                e.preventDefault();
                setAuthLoading(true);
                setAuthError("");
                try {
                    await auth.signInWithEmailAndPassword(email, password);
                    setShowAuth(false);
                    clearForm();
                } catch (error) {
                    setAuthError(error.message);
                }
                setAuthLoading(false);
            };

            const handleRegister = async (e) => {
                e.preventDefault();
                setAuthLoading(true);
                setAuthError("");
                if (!firstName.trim() || !lastName.trim() || !phone.trim() || !backupContact.trim()) {
                    setAuthError("All fields are required");
                    setAuthLoading(false);
                    return;
                }
                try {
                    const cred = await auth.createUserWithEmailAndPassword(email, password);
                    await db.collection('users').doc(cred.user.uid).set({
                        firstName: firstName.trim(),
                        lastName: lastName.trim(),
                        email: email.trim(),
                        phone: phone.trim(),
                        backupContact: backupContact.trim(),
                        isPro: false,
                        analysisCount: 0,
                        createdAt: firebase.firestore.FieldValue.serverTimestamp(),
                        lastAnalysisReset: firebase.firestore.FieldValue.serverTimestamp()
                    });
                    setShowAuth(false);
                    clearForm();
                } catch (error) {
                    setAuthError(error.message);
                }
                setAuthLoading(false);
            };

            const handleLogout = async () => {
                try { await auth.signOut(); setCurrentView('dashboard'); } catch (error) {}
            };

            const showPaywallModal = (action) => {
                setPaywallAction(action);
                setShowPaywall(true);
            };

            const handlePayPerUse = async () => {
                alert(`Processing\$4.99 payment for: ${paywallAction}\\n\\nIn a real app, this would redirect to Stripe Checkout.\\n\\nFor demo purposes, use the Pro account: prodemo@entityai.com / EntityPro123!`);
                setShowPaywall(false);
            };

            const handleSubscribePro = async () => {
                alert("Processing Pro subscription \$19.99/month)\\n\\nIn a real app, this would redirect to Stripe Checkout.\\n\\nFor demo purposes, use the Pro account: prodemo@entityai.com / EntityPro123!");
                setShowPaywall(false);
            };

            const performAnalysis = async () => {
                if (!userProfile?.isPro) {
                    showPaywallModal("Video Analysis");
                    return;
                }
                setIsAnalyzing(true);
                setTimeout(() => {
                    setAnalysisResults({
                        videoAnomalies: [
                            { timestamp: "00:02:34", type: "Shadow Movement", confidence: 87 },
                            { timestamp: "00:05:12", type: "Orb Detection", confidence: 92 },
                            { timestamp: "00:08:45", type: "Facial Pattern", confidence: 73 }
                        ],
                        audioAnomalies: [
                            { timestamp: "00:03:15", type: "EVP Detected", text: "Help me", confidence: 85 },
                            { timestamp: "00:06:22", type: "Whisper", text: "Unknown", confidence: 67 }
                        ]
                    });
                    setIsAnalyzing(false);
                    setCurrentView('analysis');
                }, 3000);
            };

            const handleFileUpload = (event) => {
                if (!userProfile?.isPro) {
                    showPaywallModal("File Upload & Analysis");
                    return;
                }
                const files = Array.from(event.target.files);
                setUploadedFiles(prev => [...prev, ...files]);
            };

            const handleJoinInvestigation = (locationName) => {
                if (!userProfile?.isPro) {
                    showPaywallModal(`Join Investigation at ${locationName}`);
                    return;
                }
                alert(`Successfully joined investigation at ${locationName}!`);
            };

            const handleJoinGroup = () => {
                if (!userProfile?.isPro) {
                    showPaywallModal("Join Collaboration Group");
                    return;
                }
                alert("Successfully joined collaboration group!");
            };

            // Enhanced Ghost Logo Component
            const EntityLogo = ({ size = "text-2xl" }) => (
                <div className="flex items-center space-x-3">
                    <div className="relative ghost-logo">
                        <svg width="50" height="50" viewBox="0 0 60 60" className="drop-shadow-lg">
                            <ellipse cx="30" cy="15" rx="20" ry="3" fill="none" stroke="#8b5cf6" strokeWidth="1.5" opacity="0.6" />
                            <path d="M30 20 C22 20, 18 24, 18 32 L18 45 L22 41 L26 45 L30 41 L34 45 L38 41 L42 45 L42 32 C42 24, 38 20, 30 20 Z" fill="white" stroke="rgba(139, 92, 246, 0.3)" strokeWidth="1"/>
                            <path d="M25 18 L23 13 L27 16 Z" fill="#8b5cf6" opacity="0.8" />
                            <path d="M35 18 L37 13 L33 16 Z" fill="#8b5cf6" opacity="0.8" />
                            <circle cx="26" cy="28" r="2" fill="black" />
                            <circle cx="34" cy="28" r="2" fill="black" />
                            <ellipse cx="30" cy="35" rx="3" ry="4" fill="black" />
                        </svg>
                    </div>
                    <span className={`${size} font-bold text-white tracking-wide`}>ENTITY</span>
                </div>
            );

            if (loading) {
                return (
                    <div className="min-h-screen bg-black flex items-center justify-center">
                        <div className="text-center">
                            <EntityLogo size="text-4xl" />
                            <div className="mt-6 loading-spinner mx-auto"></div>
                            <p className="text-gray-400 mt-4">Initializing Entity System...</p>
                        </div>
                    </div>
                );
            }

            // REGISTRATION WALL - No access without account
            if (!user) {
                return (
                    <div className="min-h-screen bg-black flex items-center justify-center p-4">
                        <div className="text-center max-w-lg mx-auto">
                            <div className="professional-card p-8 rounded-2xl shadow-2xl">
                                <EntityLogo size="text-4xl" />
                                <h1 className="ai-title mt-8 mb-4">AI Paranormal Analysis</h1>
                                <p className="text-gray-300 text-lg mb-8 leading-relaxed">
                                    Advanced artificial intelligence for paranormal evidence analysis, global investigation collaboration, and spirit communication research.
                                </p>
                                <div className="space-y-4">
                                    <button 
                                        onClick={() => { setShowAuth(true); setAuthMode("login"); }} 
                                        className="w-full bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-700 hover:to-indigo-700 text-white py-4 px-8 rounded-xl font-semibold transition-all duration-300 shadow-lg"
                                    >
                                        <i className="fas fa-sign-in-alt mr-3"></i>Sign In
                                    </button>
                                    <button 
                                        onClick={() => { setShowAuth(true); setAuthMode("register"); }} 
                                        className="w-full bg-gradient-to-r from-gray-700 to-gray-800 hover:from-gray-600 hover:to-gray-700 text-white py-4 px-8 rounded-xl font-semibold transition-all duration-300 border border-gray-600"
                                    >
                                        <i className="fas fa-user-plus mr-3"></i>Create Account
                                    </button>
                                </div>
                                <p className="text-gray-500 text-sm mt-6">
                                    Registration required to access the Entity platform
                                </p>
                            </div>
                            
                            {showAuth && (
                                <div className="fixed inset-0 bg-black bg-opacity-95 flex items-center justify-center z-50 p-4">
                                    <div className="professional-card p-8 rounded-2xl shadow-2xl w-full max-w-md">
                                        <div className="text-center mb-8">
                                            <EntityLogo size="text-2xl" />
                                            <h2 className="text-2xl font-bold text-white mt-6">
                                                {authMode === "login" ? "Welcome Back" : "Join Entity"}
                                            </h2>
                                            <p className="text-gray-400 mt-2">
                                                {authMode === "login" ? "Sign in to your account" : "Create your Entity account"}
                                            </p>
                                        </div>
                                        <form onSubmit={authMode === "login" ? handleLogin : handleRegister} className="space-y-4">
                                            {authMode === "register" && (
                                                <>
                                                    <div className="grid grid-cols-2 gap-3">
                                                        <input 
                                                            type="text" 
                                                            placeholder="First Name" 
                                                            value={firstName} 
                                                            onChange={e => setFirstName(e.target.value)} 
                                                            className="form-field px-4 py-3 rounded-lg text-white focus:outline-none" 
                                                            required 
                                                        />
                                                        <input 
                                                            type="text" 
                                                            placeholder="Last Name" 
                                                            value={lastName} 
                                                            onChange={e => setLastName(e.target.value)} 
                                                            className="form-field px-4 py-3 rounded-lg text-white focus:outline-none" 
                                                            required 
                                                        />
                                                    </div>
                                                    <input 
                                                        type="tel" 
                                                        placeholder="Phone Number" 
                                                        value={phone} 
                                                        onChange={e => setPhone(e.target.value)} 
                                                        className="form-field w-full px-4 py-3 rounded-lg text-white focus:outline-none" 
                                                        required 
                                                    />
                                                    <input 
                                                        type="text" 
                                                        placeholder="Backup Contact" 
                                                        value={backupContact} 
                                                        onChange={e => setBackupContact(e.target.value)} 
                                                        className="form-field w-full px-4 py-3 rounded-lg text-white focus:outline-none" 
                                                        required 
                                                    />
                                                </>
                                            )}
                                            <input 
                                                type="email" 
                                                placeholder="Email Address" 
                                                value={email} 
                                                onChange={e => setEmail(e.target.value)} 
                                                className="form-field w-full px-4 py-3 rounded-lg text-white focus:outline-none" 
                                                required 
                                            />
                                            <input 
                                                type="password" 
                                                placeholder="Password" 
                                                value={password} 
                                                onChange={e => setPassword(e.target.value)} 
                                                className="form-field w-full px-4 py-3 rounded-lg text-white focus:outline-none" 
                                                required 
                                            />
                                            
                                            {authError && (
                                                <div className="p-3 bg-red-900 bg-opacity-50 border border-red-500 rounded-lg text-red-300 text-sm">
                                                    <i className="fas fa-exclamation-triangle mr-2"></i>{authError}
                                                </div>
                                            )}
                                            
                                            <div className="space-y-3 mt-6">
                                                <button 
                                                    type="submit" 
                                                    disabled={authLoading} 
                                                    className="w-full bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-700 hover:to-indigo-700 text-white py-3 px-6 rounded-lg font-semibold transition-all disabled:opacity-50 flex items-center justify-center"
                                                >
                                                    {authLoading ? (
                                                        <>
                                                            <div className="loading-spinner mr-3"></div>
                                                            {authMode === "login" ? "Signing In..." : "Creating Account..."}
                                                        </>
                                                    ) : (
                                                        <>
                                                            <i className={`fas ${authMode === "login" ? "fa-sign-in-alt" : "fa-user-plus"} mr-3`}></i>
                                                            {authMode === "login" ? "Sign In" : "Create Account"}
                                                        </>
                                                    )}
                                                </button>
                                                <button 
                                                    type="button" 
                                                    onClick={() => { setAuthMode(authMode === "login" ? "register" : "login"); clearForm(); }} 
                                                    className="w-full text-purple-300 hover:text-purple-200 py-2 transition-all"
                                                >
                                                    {authMode === "login" ? "Need an account? Sign up" : "Already have an account? Sign in"}
                                                </button>
                                                <button 
                                                    type="button" 
                                                    onClick={() => { setShowAuth(false); clearForm(); }} 
                                                    className="w-full text-gray-400 hover:text-gray-300 py-2 transition-all"
                                                >
                                                    <i className="fas fa-times mr-2"></i>Cancel
                                                </button>
                                            </div>
                                        </form>
                                        <div className="mt-8 text-xs text-gray-500 text-center border-t border-gray-700 pt-4">
                                            <strong>Demo Pro Account:</strong><br />
                                            <span className="text-green-400">prodemo@entityai.com</span> / <span className="text-green-400">EntityPro123!</span>
                                        </div>
                                    </div>
                                </div>
                            )}
                        </div>
                    </div>
                );
            }

            const Navigation = () => (
                <nav className="bg-black bg-opacity-90 backdrop-blur-sm border-b border-gray-800 sticky top-0 z-40">
                    <div className="container mx-auto px-6 py-4">
                        <div className="flex justify-between items-center">
                            <EntityLogo />
                            <div className="hidden md:flex items-center space-x-6">
                                <span className="text-gray-300">Welcome, {userProfile?.firstName || 'User'}</span>
                                {userProfile?.isPro ? (
                                    <span className="pro-badge">Pro</span>
                                ) : (
                                    <span className="premium-badge">Free</span>
                                )}
                            </div>
                            <div className="flex items-center space-x-1">
                                {['dashboard', 'upload', 'analysis', 'maps', 'community', 'cases'].map(view => (
                                    <button
                                        key={view}
                                        onClick={() => setCurrentView(view)}
                                        className={`px-4 py-2 rounded-lg transition-all duration-200 ${
                                            currentView === view
                                                ? 'bg-purple-600 text-white shadow-lg'
                                                : 'text-gray-300 hover:text-white hover:bg-gray-800'
                                        }`}
                                    >
                                        {view.charAt(0).toUpperCase() + view.slice(1)}
                                    </button>
                                ))}
                                <button 
                                    onClick={handleLogout} 
                                    className="text-gray-400 hover:text-red-400 px-3 py-2 transition-all ml-4"
                                >
                                    <i className="fas fa-sign-out-alt"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </nav>
            );

            const PaywallModal = () => (
                showPaywall && (
                    <div className="fixed inset-0 paywall-modal flex items-center justify-center z-50 p-4">
                        <div className="professional-card p-8 rounded-2xl shadow-2xl max-w-md w-full">
                            <div className="text-center mb-6">
                                <div className="text-4xl mb-4">ð</div>
                                <h3 className="text-2xl font-bold text-white mb-2">Premium Feature</h3>
                                <p className="text-gray-300">{paywallAction}</p>
                            </div>
                            
                            <div className="space-y-4">
                                <div className="bg-gray-800 p-4 rounded-lg border border-gray-700">
                                    <h4 className="font-semibold text-white mb-2">Pay Per Use</h4>
                                    <p className="text-gray-400 text-sm mb-3">One-time access to this feature</p>
                                    <button 
                                        onClick={handlePayPerUse}
                                        className="w-full bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white py-3 px-6 rounded-lg font-semibold transition-all"
                                    >
                                        Pay\$4.99 Now
                                    </button>
                                </div>
                                
                                <div className="bg-gradient-to-r from-purple-900 to-indigo-900 p-4 rounded-lg border border-purple-500">
                                    <h4 className="font-semibold text-white mb-2">Pro Subscription</h4>
                                    <p className="text-gray-300 text-sm mb-3">Unlimited access to all features</p>
                                    <button 
                                        onClick={handleSubscribePro}
                                        className="w-full bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-700 hover:to-indigo-700 text-white py-3 px-6 rounded-lg font-semibold transition-all"
                                    >
                                        Subscribe\$19.99/month
                                    </button>
                                </div>
                            </div>
                            
                            <button 
                                onClick={() => setShowPaywall(false)}
                                className="w-full mt-6 text-gray-400 hover:text-gray-300 py-2 transition-all"
                            >
                                <i className="fas fa-times mr-2"></i>Cancel
                            </button>
                        </div>
                    </div>
                )
            );

            const Dashboard = () => (
                <div className="space-y-8">
                    <div className="text-center py-12">
                        <h1 className="ai-title mb-6">AI Paranormal Analysis Platform</h1>
                        <p className="text-xl text-gray-300 max-w-4xl mx-auto leading-relaxed">
                            Harness the power of artificial intelligence to analyze paranormal evidence, collaborate with investigators worldwide, and unlock the mysteries of the supernatural realm.
                        </p>
                        {!userProfile?.isPro && (
                            <div className="mt-8 professional-card p-6 rounded-xl max-w-2xl mx-auto">
                                <p className="text-gray-300 mb-4">
                                    <i className="fas fa-info-circle mr-2 text-blue-400"></i>
                                    You're using the free plan. Upgrade to Pro for unlimited analysis and collaboration, or pay per use for individual features.
                                </p>
                                <button 
                                    onClick={handleSubscribePro} 
                                    className="bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-700 hover:to-indigo-700 text-white px-8 py-3 rounded-lg font-semibold transition-all"
                                >
                                    Upgrade to Pro -\$19.99/month
                                </button>
                            </div>
                        )}
                    </div>

                    <div className="grid grid-cols-1 md:grid-cols-4 gap-6">
                        <div className="feature-card p-6 rounded-xl">
                            <div className="text-3xl mb-3">ð</div>
                            <h3 className="text-lg font-semibold text-white mb-2">Total Cases</h3>
                            <p className="text-3xl font-bold text-purple-400">{mockCases.length}</p>
                            <p className="text-gray-400 text-sm mt-2">Active investigations</p>
                        </div>
                        <div className="feature-card p-6 rounded-xl">
                            <div className="text-3xl mb-3">ð</div>
                            <h3 className="text-lg font-semibold text-white mb-2">Anomalies</h3>
                            <p className="text-3xl font-bold text-pink-400">34</p>
                            <p className="text-gray-400 text-sm mt-2">Detected this month</p>
                        </div>
                        <div className="feature-card p-6 rounded-xl">
                            <div className="text-3xl mb-3">ðµ</div>
                            <h3 className="text-lg font-semibold text-white mb-2">EVPs</h3>
                            <p className="text-3xl font-bold text-blue-400">16</p>
                            <p className="text-gray-400 text-sm mt-2">Voice phenomena</p>
                        </div>
                        <div className="feature-card p-6 rounded-xl">
                            <div className="text-3xl mb-3">ð</div>
                            <h3 className="text-lg font-semibold text-white mb-2">Locations</h3>
                            <p className="text-3xl font-bold text-green-400">{mockHauntedLocations.length}</p>
                            <p className="text-gray-400 text-sm mt-2">Global hotspots</p>
                        </div>
                    </div>

                    <div className="grid grid-cols-1 lg:grid-cols-2 gap-8">
                        <div className="feature-card p-6 rounded-xl">
                            <h3 className="text-xl font-semibold mb-6 text-white">Recent Investigations</h3>
                            <div className="space-y-4">
                                {mockCases.map(case_ => (
                                    <div key={case_.id} className="bg-gray-800 bg-opacity-50 p-4 rounded-lg border border-gray-700">
                                        <div className="flex justify-between items-start mb-2">
                                            <h4 className="font-semibold text-white">{case_.name}</h4>
                                            <span className={`px-2 py-1 rounded text-xs font-medium ${
                                                case_.status === 'analyzed' ? 'bg-green-600 text-white' : 'bg-yellow-600 text-black'
                                            }`}>
                                                {case_.status}
                                            </span>
                                        </div>
                                        <p className="text-sm text-gray-400 mb-2">{case_.location} â¢ {case_.date}</p>
                                        <div className="flex justify-between items-center text-sm">
                                            <span className="text-yellow-400">{case_.anomalies} anomalies</span>
                                            <span className="text-blue-400">{case_.evps} EVPs</span>
                                        </div>
                                    </div>
                                ))}
                            </div>
                        </div>

                        <div className="feature-card p-6 rounded-xl">
                            <h3 className="text-xl font-semibold mb-6 text-white">Active Locations</h3>
                            <div className="space-y-4">
                                {mockHauntedLocations.map(location => (
                                    <div key={location.id} className="bg-gray-800 bg-opacity-50 p-4 rounded-lg border border-gray-700">
                                        <div className="flex justify-between items-start mb-2">
                                            <h4 className="font-semibold text-white">{location.name}</h4>
                                            <span className={`px-2 py-1 rounded text-xs font-medium ${
                                                location.activityLevel === 'Extreme' ? 'bg-red-600 text-white' : 'bg-orange-600 text-white'
                                            }`}>
                                                {location.activityLevel}
                                            </span>
                                        </div>
                                        <p className="text-sm text-gray-400 mb-3">{location.location}</p>
                                        <div className="flex justify-between text-xs text-gray-500 mb-3">
                                            <span>{location.evidenceCount} evidence</span>
                                            <span>{location.investigators} investigators</span>
                                        </div>
                                        <button 
                                            onClick={() => handleJoinInvestigation(location.name)}
                                            className={`w-full py-2 rounded-lg text-sm font-medium transition-all ${
                                                userProfile?.isPro 
                                                    ? 'bg-purple-600 hover:bg-purple-700 text-white' 
                                                    : 'bg-gray-700 hover:bg-gray-600 text-gray-300'
                                            }`}
                                        >
                                            {userProfile?.isPro ? 'Join Investigation' : 'Join \$4.99)'}
                                        </button>
                                    </div>
                                ))}
                            </div>
                        </div>
                    </div>
                </div>
            );

            const UploadView = () => (
                <div className="space-y-8">
                    <div className="text-center">
                        <h1 className="text-4xl font-bold mb-4 text-white">Evidence Upload</h1>
                        <p className="text-xl text-gray-300 max-w-3xl mx-auto">
                            Upload your paranormal evidence for AI-powered analysis and anomaly detection.
                        </p>
                    </div>

                    <div className="feature-card p-8 rounded-xl text-center">
                        <div className="text-6xl mb-6">ð</div>
                        <h3 className="text-2xl font-semibold mb-4 text-white">Upload Evidence Files</h3>
                        <p className="text-gray-400 mb-8">Supported formats: Video (MP4, MOV), Audio (MP3, WAV), Images (JPG, PNG)</p>
                        
                        <input 
                            type="file" 
                            multiple 
                            accept="video/*,audio/*,image/*" 
                            onChange={handleFileUpload}
                            className="hidden" 
                            id="file-upload"
                        />
                        <label 
                            htmlFor="file-upload" 
                            className="inline-block bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-700 hover:to-indigo-700 text-white px-8 py-4 rounded-xl font-semibold transition-all cursor-pointer"
                        >
                            <i className="fas fa-upload mr-3"></i>Select Files
                        </label>
                        
                        {!userProfile?.isPro && (
                            <p className="text-gray-400 text-sm mt-4">
                                <i className="fas fa-info-circle mr-2"></i>
                                Analysis requires Pro subscription or\$4.99 per upload
                            </p>
                        )}
                    </div>

                    {uploadedFiles.length > 0 && (
                        <div className="feature-card p-6 rounded-xl">
                            <h3 className="text-xl font-semibold mb-4 text-white">Uploaded Files</h3>
                            <div className="space-y-3">
                                {uploadedFiles.map((file, index) => (
                                    <div key={index} className="flex justify-between items-center bg-gray-800 p-3 rounded-lg">
                                        <span className="text-white">{file.name}</span>
                                        <span className="text-gray-400">{(file.size / 1024 / 1024).toFixed(2)} MB</span>
                                    </div>
                                ))}
                            </div>
                            <button 
                                onClick={performAnalysis}
                                className="mt-6 w-full bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-700 hover:to-indigo-700 text-white py-3 rounded-lg font-semibold transition-all"
                            >
                                {userProfile?.isPro ? 'Start AI Analysis' : 'Analyze \$4.99)'}
                            </button>
                        </div>
                    )}
                </div>
            );

            const AnalysisView = () => (
                <div className="space-y-8">
                    <div className="text-center">
                        <h1 className="ai-title mb-4">AI Analysis Results</h1>
                        <p className="text-xl text-gray-300 max-w-3xl mx-auto">
                            Advanced artificial intelligence analysis of your paranormal evidence.
                        </p>
                    </div>

                    {isAnalyzing && (
                        <div className="feature-card p-8 rounded-xl text-center">
                            <div className="text-6xl mb-6">ð®</div>
                            <h3 className="text-2xl font-semibold mb-4 text-white">Analyzing Evidence...</h3>
                            <p className="text-gray-400 mb-6">AI is processing your files for paranormal anomalies</p>
                            <div className="w-full bg-gray-700 rounded-full h-3">
                                <div className="bg-gradient-to-r from-purple-500 to-indigo-500 h-3 rounded-full animate-pulse" style={{width: '65%'}}></div>
                            </div>
                        </div>
                    )}

                    {analysisResults && (
                        <div className="space-y-6">
                            <div className="feature-card p-6 rounded-xl">
                                <h3 className="text-xl font-semibold mb-6 text-white">ð¥ Video Anomalies Detected</h3>
                                <div className="space-y-4">
                                    {analysisResults.videoAnomalies.map((anomaly, index) => (
                                        <div key={index} className="bg-gray-800 bg-opacity-50 p-4 rounded-lg border border-gray-700">
                                            <div className="flex justify-between items-center">
                                                <div>
                                                    <h4 className="font-semibold text-white">{anomaly.type}</h4>
                                                    <p className="text-sm text-gray-400">Timestamp: {anomaly.timestamp}</p>
                                                </div>
                                                <div className="text-right">
                                                    <p className="text-lg font-bold text-white">{anomaly.confidence}%</p>
                                                    <div className={`w-20 h-2 rounded-full ${
                                                        anomaly.confidence > 80 ? 'bg-red-500' :
                                                        anomaly.confidence > 60 ? 'bg-yellow-500' : 'bg-green-500'
                                                    }`}></div>
                                                </div>
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            </div>

                            <div className="feature-card p-6 rounded-xl">
                                <h3 className="text-xl font-semibold mb-6 text-white">ðµ Audio Analysis (EVP)</h3>
                                <div className="space-y-4">
                                    {analysisResults.audioAnomalies.map((anomaly, index) => (
                                        <div key={index} className="bg-gray-800 bg-opacity-50 p-4 rounded-lg border border-gray-700">
                                            <div className="flex justify-between items-center">
                                                <div>
                                                    <h4 className="font-semibold text-white">"{anomaly.text}"</h4>
                                                    <p className="text-sm text-gray-400">Timestamp: {anomaly.timestamp}</p>
                                                </div>
                                                <div className="flex items-center space-x-4">
                                                    <span className="text-lg font-bold text-white">{anomaly.confidence}%</span>
                                                    <button className="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm transition-all">
                                                        <i className="fas fa-play mr-2"></i>Play
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            </div>
                        </div>
                    )}

                    {!analysisResults && !isAnalyzing && (
                        <div className="feature-card p-8 rounded-xl text-center">
                            <div className="text-6xl mb-6">ð</div>
                            <h3 className="text-2xl font-semibold mb-4 text-white">No Analysis Results</h3>
                            <p className="text-gray-400 mb-6">Upload evidence files to begin AI analysis</p>
                            <button 
                                onClick={() => setCurrentView('upload')}
                                className="bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-700 hover:to-indigo-700 text-white px-8 py-3 rounded-lg font-semibold transition-all"
                            >
                                Upload Evidence
                            </button>
                        </div>
                    )}
                </div>
            );

            const MapsView = () => (
                <div className="space-y-8">
                    <div className="text-center">
                        <h1 className="text-4xl font-bold mb-4 text-white">Global Paranormal Map</h1>
                        <p className="text-xl text-gray-300 max-w-3xl mx-auto">
                            Explore haunted locations worldwide and connect with local investigators.
                        </p>
                    </div>

                    <div className="feature-card p-8 rounded-xl text-center">
                        <div className="text-6xl mb-6">ðºï¸</div>
                        <h3 className="text-2xl font-semibold mb-4 text-white">Interactive Global Map</h3>
                        <p className="text-gray-400 mb-8">Discover paranormal hotspots and active investigations worldwide</p>
                        
                        <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
                            <div className="bg-red-900 bg-opacity-30 p-4 rounded-lg border border-red-500">
                                <div className="text-2xl font-bold text-red-400">247</div>
                                <div className="text-sm text-gray-300">Extreme Activity</div>
                            </div>
                            <div className="bg-blue-900 bg-opacity-30 p-4 rounded-lg border border-blue-500">
                                <div className="text-2xl font-bold text-blue-400">1,892</div>
                                <div className="text-sm text-gray-300">Evidence Reports</div>
                            </div>
                            <div className="bg-green-900 bg-opacity-30 p-4 rounded-lg border border-green-500">
                                <div className="text-2xl font-bold text-green-400">12,847</div>
                                <div className="text-sm text-gray-300">Active Investigators</div>
                            </div>
                        </div>
                    </div>

                    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                        {mockHauntedLocations.map(location => (
                            <div key={location.id} className="feature-card p-6 rounded-xl">
                                <div className="flex justify-between items-start mb-4">
                                    <h4 className="font-semibold text-white text-lg">{location.name}</h4>
                                    <span className={`px-3 py-1 rounded-full text-xs font-medium ${
                                        location.activityLevel === 'Extreme' ? 'bg-red-600 text-white' : 'bg-orange-600 text-white'
                                    }`}>
                                        {location.activityLevel}
                                    </span>
                                </div>
                                <p className="text-sm text-gray-400 mb-4">{location.location}</p>
                                <p className="text-sm text-gray-300 mb-4">{location.description}</p>
                                <div className="flex justify-between text-xs text-gray-500 mb-4">
                                    <span>{location.evidenceCount} evidence</span>
                                    <span>{location.investigators} investigators</span>
                                </div>
                                <button 
                                    onClick={() => handleJoinInvestigation(location.name)}
                                    className={`w-full py-2 rounded-lg text-sm font-medium transition-all ${
                                        userProfile?.isPro 
                                            ? 'bg-purple-600 hover:bg-purple-700 text-white' 
                                            : 'bg-gray-700 hover:bg-gray-600 text-gray-300'
                                    }`}
                                >
                                    {userProfile?.isPro ? 'Join Investigation' : 'Join \$4.99)'}
                                </button>
                            </div>
                        ))}
                    </div>
                </div>
            );

            const CommunityView = () => (
                <div className="space-y-8">
                    <div className="text-center">
                        <h1 className="text-4xl font-bold mb-4 text-white">Community Hub</h1>
                        <p className="text-xl text-gray-300 max-w-3xl mx-auto">
                            Connect with paranormal investigators worldwide and collaborate on cases.
                        </p>
                    </div>

                    <div className="grid grid-cols-1 lg:grid-cols-2 gap-8">
                        <div className="feature-card p-6 rounded-xl">
                            <h3 className="text-xl font-semibold mb-6 text-white">ð Top Contributors</h3>
                            <div className="space-y-4">
                                {[
                                    { name: "@SpiritWhisperer", points: 2450, solved: 12, badge: "Expert" },
                                    { name: "@GhostDetective", points: 1890, solved: 8, badge: "Pro" },
                                    { name: "@ParanormalPro", points: 1650, solved: 7, badge: "Pro" },
                                    { name: "@EntityHunter", points: 1420, solved: 5, badge: "Advanced" }
                                ].map((user, index) => (
                                    <div key={index} className="bg-gray-800 bg-opacity-50 p-4 rounded-lg border border-gray-700 flex justify-between items-center">
                                        <div className="flex items-center space-x-4">
                                            <span className="text-2xl font-bold text-yellow-400">#{index + 1}</span>
                                            <div>
                                                <p className="font-semibold text-white">{user.name}</p>
                                                <p className="text-sm text-gray-400">{user.solved} cases solved</p>
                                            </div>
                                        </div>
                                        <div className="text-right">
                                            <p className="text-lg font-bold text-purple-400">{user.points} pts</p>
                                            <span className="text-xs bg-purple-600 text-white px-2 py-1 rounded">{user.badge}</span>
                                        </div>
                                    </div>
                                ))}
                            </div>
                        </div>

                        <div className="feature-card p-6 rounded-xl">
                            <h3 className="text-xl font-semibold mb-6 text-white">ð¤ Collaboration Groups</h3>
                            <div className="space-y-4">
                                {[
                                    { name: "Northeast Investigators", members: 47, active: "2 hours ago" },
                                    { name: "Historic Hauntings", members: 32, active: "5 hours ago" },
                                    { name: "EVP Specialists", members: 28, active: "1 day ago" },
                                    { name: "Cemetery Research", members: 19, active: "2 days ago" }
                                ].map((group, index) => (
                                    <div key={index} className="bg-gray-800 bg-opacity-50 p-4 rounded-lg border border-gray-700">
                                        <div className="flex justify-between items-start mb-2">
                                            <h4 className="font-semibold text-white">{group.name}</h4>
                                            <span className="text-xs text-green-400">{group.active}</span>
                                        </div>
                                        <p className="text-sm text-gray-400 mb-3">{group.members} members</p>
                                        <button 
                                            onClick={handleJoinGroup}
                                            className={`w-full py-2 rounded-lg text-sm font-medium transition-all ${
                                                userProfile?.isPro 
                                                    ? 'bg-purple-600 hover:bg-purple-700 text-white' 
                                                    : 'bg-gray-700 hover:bg-gray-600 text-gray-300'
                                            }`}
                                        >
                                            {userProfile?.isPro ? 'Join Group' : 'Join \$4.99)'}
                                        </button>
                                    </div>
                                ))}
                            </div>
                        </div>
                    </div>

                    <div className="feature-card p-8 rounded-xl text-center">
                        <div className="text-6xl mb-6">ð¬</div>
                        <h3 className="text-2xl font-semibold mb-4 text-white">Community Features</h3>
                        <p className="text-gray-400 mb-6">Join discussions, share evidence, and collaborate on investigations</p>
                        <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <div className="bg-gray-800 bg-opacity-50 p-4 rounded-lg">
                                <div className="text-2xl mb-2">ð</div>
                                <h4 className="font-semibold text-white mb-1">Case Discussions</h4>
                                <p className="text-sm text-gray-400">Share insights and theories</p>
                            </div>
                            <div className="bg-gray-800 bg-opacity-50 p-4 rounded-lg">
                                <div className="text-2xl mb-2">ð¯</div>
                                <h4 className="font-semibold text-white mb-1">Expert Reviews</h4>
                                <p className="text-sm text-gray-400">Get professional analysis</p>
                            </div>
                            <div className="bg-gray-800 bg-opacity-50 p-4 rounded-lg">
                                <div className="text-2xl mb-2">ð</div>
                                <h4 className="font-semibold text-white mb-1">Achievement System</h4>
                                <p className="text-sm text-gray-400">Earn badges and recognition</p>
                            </div>
                        </div>
                    </div>
                </div>
            );

            const CasesView = () => (
                <div className="space-y-8">
                    <div className="text-center">
                        <h1 className="text-4xl font-bold mb-4 text-white">Case Files</h1>
                        <p className="text-xl text-gray-300 max-w-3xl mx-auto">
                            Browse and manage paranormal investigation case files from around the world.
                        </p>
                    </div>

                    <div className="space-y-6">
                        {mockCases.map(case_ => (
                            <div key={case_.id} className="feature-card p-6 rounded-xl">
                                <div className="flex justify-between items-start mb-4">
                                    <h3 className="text-2xl font-semibold text-white">{case_.name}</h3>
                                    <div className="flex space-x-2">
                                        {case_.isPublic && (
                                            <span className="bg-green-600 text-white px-3 py-1 rounded-full text-xs font-medium">
                                                Public
                                            </span>
                                        )}
                                        <span className={`px-3 py-1 rounded-full text-xs font-medium ${
                                            case_.status === 'analyzed' ? 'bg-green-600 text-white' : 'bg-yellow-600 text-black'
                                        }`}>
                                            {case_.status}
                                        </span>
                                    </div>
                                </div>

                                <div className="grid grid-cols-2 md:grid-cols-4 gap-4 mb-4">
                                    <div>
                                        <span className="text-gray-400 text-sm">Date</span>
                                        <p className="text-white font-medium">{case_.date}</p>
                                    </div>
                                    <div>
                                        <span className="text-gray-400 text-sm">Location</span>
                                        <p className="text-white font-medium">{case_.location}</p>
                                    </div>
                                    <div>
                                        <span className="text-gray-400 text-sm">Anomalies</span>
                                        <p className="text-white font-medium">{case_.anomalies}</p>
                                    </div>
                                    <div>
                                        <span className="text-gray-400 text-sm">EVPs
