<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Entity: The Paranormal Evidence AI</title>
    <script src="https://unpkg.com/react@17/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@17/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
    <script src="https://js.stripe.com/v3/"></script>
    <style>
        body {
            background: #000000 !important;
            min-height: 100vh;
            font-family: 'Courier New', monospace;
        }
        .horror-font {
            font-family: 'Creepster', 'Chiller', 'Nosifer', cursive;
            text-shadow: 0 0 10px #ff0080, 0 0 20px #ff0080, 0 0 30px #ff0080;
        }
        .ai-analysis-title {
            font-size: 3.5rem;
            font-weight: 900;
            background: linear-gradient(45deg, #00ff00, #ffff00, #00ff00);
            background-size: 200% 200%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: neonGlow 2s ease-in-out infinite alternate;
            text-shadow: 0 0 20px #00ff00, 0 0 40px #00ff00, 0 0 60px #00ff00;
        }
        @keyframes neonGlow {
            0% { 
                background-position: 0% 50%;
                filter: brightness(1);
            }
            100% { 
                background-position: 100% 50%;
                filter: brightness(1.2);
            }
        }
        .neon-glow {
            box-shadow: 0 0 5px currentColor, 0 0 10px currentColor, 0 0 15px currentColor;
        }
        .loading-spinner {
            border: 2px solid #f3f3f3;
            border-top: 2px solid #8b5cf6;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .form-field {
            background: rgba(17, 24, 39, 0.8);
            border: 1px solid rgba(139, 92, 246, 0.3);
            transition: all 0.3s ease;
        }
        .form-field:focus {
            border-color: #8b5cf6;
            box-shadow: 0 0 0 2px rgba(139, 92, 246, 0.2);
            background: rgba(17, 24, 39, 0.9);
        }
        .ghost-shadow {
            filter: drop-shadow(0 0 20px rgba(139, 92, 246, 0.5));
        }
        .pro-only-overlay {
            position: relative;
        }
        .pro-only-overlay::after {
            content: "PRO ONLY";
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(255, 0, 0, 0.9);
            color: white;
            padding: 10px 20px;
            border-radius: 5px;
            font-weight: bold;
            z-index: 10;
        }
        #error-container {
            color: orange;
            font-size: 16px;
            margin: 12px;
            min-height: 120px;
            overflow-y: auto;
            border: 1px solid orange;
            padding: 10px;
            border-radius: 8px;
            background-color: #ff96000d;
            display: none;
        }
    </style>
</head>
<body>
    <div id="root"></div>
    <div id="error-container"></div>
    <script type="text/babel">
        // Firebase config - REPLACE with your actual config
        const firebaseConfig = {
            apiKey: "AIzaSyCa_L8Hf-HpOucA09fF14kECmyGNy7mNz0",
            authDomain: "entity-paranormal-ai.firebaseapp.com",
            databaseURL: "https://entity-paranormal-ai-default-rtdb.firebaseio.com",
            projectId: "entity-paranormal-ai",
            storageBucket: "entity-paranormal-ai.firebasestorage.app",
            messagingSenderId: "194851934791",
            appId: "1:194851934791:web:62b84d19b0ba6088bf1762",
            measurementId: "G-K1536GWN62"
        };
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.firestore();
        const stripe = Stripe("pk_live_51RcjDXJnh7g2pvRQN6qjFRBEB3SxiTdzrgijbrslDy4G2XbGSHBpOAhKZ8G7U3rSGGmbpQCqM8hZmcxZx1mYpBrv00iVexVeNG");

        const DEMO_PRO_EMAIL = "prodemo@entityai.com";
        const DEMO_PRO_PASS = "EntityPro123!";

        function App() {
            const [user, setUser] = React.useState(null);
            const [userProfile, setUserProfile] = React.useState(null);
            const [loading, setLoading] = React.useState(true);
            const [showAuth, setShowAuth] = React.useState(false);
            const [authMode, setAuthMode] = React.useState("login");
            const [email, setEmail] = React.useState("");
            const [password, setPassword] = React.useState("");
            const [firstName, setFirstName] = React.useState("");
            const [lastName, setLastName] = React.useState("");
            const [phone, setPhone] = React.useState("");
            const [backupContact, setBackupContact] = React.useState("");
            const [authError, setAuthError] = React.useState("");
            const [authLoading, setAuthLoading] = React.useState(false);
            const [currentView, setCurrentView] = React.useState('dashboard');
            const [uploadedFiles, setUploadedFiles] = React.useState([]);
            const [analysisResults, setAnalysisResults] = React.useState(null);
            const [isAnalyzing, setIsAnalyzing] = React.useState(false);
            const [selectedCase, setSelectedCase] = React.useState(null);
            const [showCollabModal, setShowCollabModal] = React.useState(false);
            const [selectedLocation, setSelectedLocation] = React.useState(null);

            // Mock data for demonstration
            const mockCases = [
                {
                    id: 1,
                    name: "Abandoned Hospital Investigation",
                    date: "2024-06-15",
                    location: "St. Mary's Hospital, Salem",
                    anomalies: 7,
                    evps: 3,
                    status: "analyzed",
                    collaborators: ["@GhostHunter92", "@ParanormalPro"],
                    isPublic: true
                },
                {
                    id: 2,
                    name: "Cemetery Midnight Session",
                    date: "2024-06-10",
                    location: "Greenlawn Cemetery",
                    anomalies: 12,
                    evps: 5,
                    status: "processing",
                    collaborators: ["@SpiritSeeker"],
                    isPublic: false
                }
            ];

            const mockHauntedLocations = [
                {
                    id: 1,
                    name: "Eastern State Penitentiary",
                    location: "Philadelphia, PA",
                    coordinates: { lat: 39.9686, lng: -75.1725 },
                    activityLevel: "high",
                    evidenceCount: 47,
                    investigators: 23,
                    lastActivity: "2 hours ago",
                    description: "Historic prison with intense paranormal activity",
                    recentEvidence: ["Shadow figure in Cell Block 12", "EVP: 'Get out'", "Temperature drop of 15¬∞F"]
                },
                {
                    id: 2,
                    name: "Waverly Hills Sanatorium",
                    location: "Louisville, KY",
                    coordinates: { lat: 38.1347, lng: -85.9067 },
                    activityLevel: "extreme",
                    evidenceCount: 89,
                    investigators: 41,
                    lastActivity: "30 minutes ago",
                    description: "Former tuberculosis hospital, one of the most haunted places in America",
                    recentEvidence: ["Full body apparition in Room 502", "Multiple EVPs recorded", "Doors slamming shut"]
                }
            ];

            React.useEffect(() => {
                const unsubscribe = auth.onAuthStateChanged(async (user) => {
                    setUser(user);
                    if (user) {
                        // If demo pro account, force isPro
                        if (user.email === DEMO_PRO_EMAIL) {
                            setUserProfile({
                                firstName: "Demo",
                                lastName: "Pro",
                                email: DEMO_PRO_EMAIL,
                                isPro: true,
                                analysisCount: 0
                            });
                        } else {
                            try {
                                const userDoc = await db.collection('users').doc(user.uid).get();
                                if (userDoc.exists) {
                                    setUserProfile(userDoc.data());
                                } else {
                                    setUserProfile(null);
                                }
                            } catch (error) {
                                setUserProfile(null);
                            }
                        }
                    } else {
                        setUserProfile(null);
                    }
                    setLoading(false);
                });
                return () => unsubscribe();
            }, []);

            const clearForm = () => {
                setEmail(""); setPassword(""); setFirstName(""); setLastName(""); setPhone(""); setBackupContact(""); setAuthError("");
            };

            const handleLogin = async (e) => {
                e.preventDefault();
                setAuthLoading(true);
                setAuthError("");
                try {
                    await auth.signInWithEmailAndPassword(email, password);
                    setShowAuth(false);
                    clearForm();
                } catch (error) {
                    setAuthError(error.message);
                }
                setAuthLoading(false);
            };

            const handleRegister = async (e) => {
                e.preventDefault();
                setAuthLoading(true);
                setAuthError("");
                if (!firstName.trim() || !lastName.trim() || !phone.trim() || !backupContact.trim()) {
                    setAuthError("All fields are required");
                    setAuthLoading(false);
                    return;
                }
                try {
                    const cred = await auth.createUserWithEmailAndPassword(email, password);
                    await db.collection('users').doc(cred.user.uid).set({
                        firstName: firstName.trim(),
                        lastName: lastName.trim(),
                        email: email.trim(),
                        phone: phone.trim(),
                        backupContact: backupContact.trim(),
                        isPro: false,
                        analysisCount: 0,
                        createdAt: firebase.firestore.FieldValue.serverTimestamp(),
                        lastAnalysisReset: firebase.firestore.FieldValue.serverTimestamp()
                    });
                    setShowAuth(false);
                    clearForm();
                } catch (error) {
                    setAuthError(error.message);
                }
                setAuthLoading(false);
            };

            const handleLogout = async () => {
                try { await auth.signOut(); setCurrentView('dashboard'); } catch (error) {}
            };

            const handleUpgradeToPro = async () => {
                if (!userProfile?.isPro) {
                    alert("Stripe integration: In a real app, this would redirect to Stripe Checkout for $19.99/month subscription.\\nFor demo, use the Pro account: prodemo@entityai.com / EntityPro123!");
                }
            };

            const performAnalysis = async () => {
                if (!userProfile?.isPro) {
                    alert("üîí PRO FEATURE REQUIRED\\n\\nVideo analysis requires a Pro subscription ($19.99/month).\\n\\nFor demo, use: prodemo@entityai.com / EntityPro123!");
                    return;
                }
                setIsAnalyzing(true);
                setTimeout(() => {
                    setAnalysisResults({
                        videoAnomalies: [
                            { timestamp: "00:02:34", type: "Shadow Movement", confidence: 87 },
                            { timestamp: "00:05:12", type: "Orb Detection", confidence: 92 },
                            { timestamp: "00:08:45", type: "Facial Pattern", confidence: 73 }
                        ],
                        audioAnomalies: [
                            { timestamp: "00:03:15", type: "EVP Detected", text: "Help me", confidence: 85 },
                            { timestamp: "00:06:22", type: "Whisper", text: "Unknown", confidence: 67 }
                        ]
                    });
                    setIsAnalyzing(false);
                    setCurrentView('analysis');
                }, 3000);
            };

            const handleFileUpload = (event) => {
                if (!userProfile?.isPro) {
                    alert("üîí PRO FEATURE REQUIRED\\n\\nFile upload and analysis requires a Pro subscription ($19.99/month).\\n\\nFor demo, use: prodemo@entityai.com / EntityPro123!");
                    return;
                }
                const files = Array.from(event.target.files);
                setUploadedFiles(prev => [...prev, ...files]);
            };

            const handleJoinInvestigation = (locationName) => {
                if (!userProfile?.isPro) {
                    alert(`üîí PRO FEATURE REQUIRED\\n\\nJoining investigations at ${locationName} requires a Pro subscription ($19.99/month).\\n\\nFor demo, use: prodemo@entityai.com / EntityPro123!`);
                    return;
                }
                alert(`Joining investigation at ${locationName}...`);
            };

            // Enhanced Ghost Logo Component
            const EntityLogo = ({ size = "text-2xl" }) => (
                <div className="flex items-center space-x-3">
                    <div className="relative ghost-shadow">
                        <svg width="60" height="60" viewBox="0 0 60 60" className="drop-shadow-lg">
                            <ellipse cx="30" cy="15" rx="25" ry="4" fill="none" stroke="#ffff00" strokeWidth="2" className="neon-glow" style={{filter: 'drop-shadow(0 0 8px #ffff00)'}} />
                            <path d="M30 20 C20 20, 15 25, 15 35 L15 50 L20 45 L25 50 L30 45 L35 50 L40 45 L45 50 L45 35 C45 25, 40 20, 30 20 Z" fill="white" stroke="rgba(255,255,255,0.3)" strokeWidth="1"/>
                            <path d="M22 18 L20 12 L24 15 Z" fill="#ff0080" className="neon-glow" style={{filter: 'drop-shadow(0 0 6px #ff0080)'}} />
                            <path d="M38 18 L40 12 L36 15 Z" fill="#ff0080" className="neon-glow" style={{filter: 'drop-shadow(0 0 6px #ff0080)'}} />
                            <circle cx="25" cy="30" r="3" fill="black" />
                            <circle cx="35" cy="30" r="3" fill="black" />
                            <ellipse cx="30" cy="38" rx="4" ry="6" fill="black" />
                        </svg>
                    </div>
                    <span className={`${size} font-bold horror-font text-white`}>ENTITY</span>
                </div>
            );

            if (loading) {
                return (
                    <div className="min-h-screen bg-black flex items-center justify-center">
                        <div className="text-center">
                            <EntityLogo size="text-4xl" />
                            <div className="mt-4 loading-spinner mx-auto"></div>
                            <p className="text-purple-300 mt-2">Initializing Entity...</p>
                        </div>
                    </div>
                );
            }

            // REQUIRE REGISTRATION - Show auth screen if no user
            if (!user) {
                return (
                    <div className="min-h-screen bg-black flex items-center justify-center">
                        <div className="text-center max-w-md mx-auto p-8">
                            <EntityLogo size="text-4xl" />
                            <h1 className="ai-analysis-title mt-6 mb-2">AI PARANORMAL ANALYSIS</h1>
                            <h2 className="text-2xl font-bold text-white mb-4">Access Restricted</h2>
                            <p className="text-gray-300 mb-8">Registration required to access the Entity system</p>
                            <div className="space-y-4">
                                <button onClick={() => { setShowAuth(true); setAuthMode("login"); }} className="w-full bg-purple-600 hover:bg-purple-700 text-white py-3 px-6 rounded-lg font-semibold transition-all neon-glow">
                                    <i className="fas fa-sign-in-alt mr-2"></i>Sign In
                                </button>
                                <button onClick={() => { setShowAuth(true); setAuthMode("register"); }} className="w-full bg-pink-600 hover:bg-pink-700 text-white py-3 px-6 rounded-lg font-semibold transition-all neon-glow">
                                    <i className="fas fa-user-plus mr-2"></i>Create Account
                                </button>
                            </div>
                            {showAuth && (
                                <div className="fixed inset-0 bg-black bg-opacity-95 flex items-center justify-center z-50 p-4">
                                    <div className="bg-gray-900 bg-opacity-95 p-8 rounded-lg shadow-2xl w-full max-w-md border border-purple-500">
                                        <div className="text-center mb-6">
                                            <EntityLogo size="text-2xl" />
                                            <h2 className="text-2xl font-bold text-white mt-4">{authMode === "login" ? "Entity Access" : "Entity Registration"}</h2>
                                        </div>
                                        <form onSubmit={authMode === "login" ? handleLogin : handleRegister}>
                                            <div className="space-y-4">
                                                {authMode === "register" && (
                                                    <>
                                                        <div className="grid grid-cols-2 gap-3">
                                                            <input type="text" placeholder="First Name" value={firstName} onChange={e => setFirstName(e.target.value)} className="form-field px-4 py-3 rounded-lg text-white focus:outline-none" required />
                                                            <input type="text" placeholder="Last Name" value={lastName} onChange={e => setLastName(e.target.value)} className="form-field px-4 py-3 rounded-lg text-white focus:outline-none" required />
                                                        </div>
                                                        <input type="tel" placeholder="Phone Number" value={phone} onChange={e => setPhone(e.target.value)} className="form-field w-full px-4 py-3 rounded-lg text-white focus:outline-none" required />
                                                        <input type="text" placeholder="Backup Email or Phone" value={backupContact} onChange={e => setBackupContact(e.target.value)} className="form-field w-full px-4 py-3 rounded-lg text-white focus:outline-none" required />
                                                    </>
                                                )}
                                                <input type="email" placeholder="Email" value={email} onChange={e => setEmail(e.target.value)} className="form-field w-full px-4 py-3 rounded-lg text-white focus:outline-none" required />
                                                <input type="password" placeholder="Password" value={password} onChange={e => setPassword(e.target.value)} className="form-field w-full px-4 py-3 rounded-lg text-white focus:outline-none" required />
                                            </div>
                                            {authError && (
                                                <div className="mt-4 p-3 bg-red-900 bg-opacity-50 border border-red-500 rounded text-red-300 text-sm">
                                                    <i className="fas fa-exclamation-triangle mr-2"></i>{authError}
                                                </div>
                                            )}
                                            <div className="mt-6 space-y-3">
                                                <button type="submit" disabled={authLoading} className="w-full bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white py-3 px-6 rounded-lg font-semibold transition-all disabled:opacity-50 flex items-center justify-center neon-glow">
                                                    {authLoading ? (
                                                        <>
                                                            <div className="loading-spinner mr-2"></div>
                                                            {authMode === "login" ? "Authenticating..." : "Creating Account..."}
                                                        </>
                                                    ) : (
                                                        <>
                                                            <i className={`fas ${authMode === "login" ? "fa-sign-in-alt" : "fa-user-plus"} mr-2`}></i>
                                                            {authMode === "login" ? "Access Entity" : "Create Entity Account"}
                                                        </>
                                                    )}
                                                </button>
                                                <button type="button" onClick={() => { setAuthMode(authMode === "login" ? "register" : "login"); clearForm(); }} className="w-full text-purple-300 hover:text-purple-200 py-2 transition-all">
                                                    {authMode === "login" ? "Need access? Create account" : "Already have access? Sign in"}
                                                </button>
                                                <button type="button" onClick={() => { setShowAuth(false); clearForm(); }} className="w-full text-gray-400 hover:text-gray-300 py-2 transition-all">
                                                    <i className="fas fa-times mr-2"></i>Cancel
                                                </button>
                                            </div>
                                        </form>
                                        <div className="mt-6 text-xs text-gray-400 text-center">
                                            <b>Demo Pro Account:</b><br />
                                            Email: <span className="text-green-300">prodemo@entityai.com</span><br />
                                            Password: <span className="text-green-300">EntityPro123!</span>
                                        </div>
                                    </div>
                                </div>
                            )}
                        </div>
                    </div>
                );
            }

            const Navigation = () => (
                <nav className="bg-black bg-opacity-90 backdrop-blur-sm border-b border-purple-500 sticky top-0 z-50">
                    <div className="container mx-auto px-4 py-4 flex justify-between items-center">
                        <EntityLogo />
                        <div className="hidden md:flex items-center space-x-4">
                            <span className="text-purple-300 text-sm">Welcome, {userProfile?.firstName || 'User'}</span>
                            {!userProfile?.isPro && (
                                <span className="bg-yellow-600 text-black px-2 py-1 rounded text-xs font-bold">FREE</span>
                            )}
                            {userProfile?.isPro && (
                                <span className="bg-green-600 text-white px-2 py-1 rounded text-xs font-bold">PRO</span>
                            )}
                        </div>
                        <div className="flex items-center space-x-2">
                            {['dashboard', 'upload', 'analysis', 'maps', 'community', 'cases'].map(view => (
                                <button
                                    key={view}
                                    onClick={() => setCurrentView(view)}
                                    className={`px-4 py-2 rounded transition-all ${
                                        currentView === view
                                            ? 'bg-pink-500 text-white shadow-lg shadow-pink-500/50'
                                            : 'text-gray-300 hover:text-pink-400 hover:bg-gray-900'
                                    }`}
                                >
                                    {view.charAt(0).toUpperCase() + view.slice(1)}
                                </button>
                            ))}
                            <button onClick={handleLogout} className="text-gray-400 hover:text-red-400 px-3 py-2 transition-all">
                                <i className="fas fa-sign-out-alt"></i>
                            </button>
                        </div>
                    </div>
                </nav>
            );

            const Dashboard = () => (
                <div className="space-y-8">
                    <div className="text-center py-12">
                        <h1 className="ai-analysis-title mb-4">AI PARANORMAL ANALYSIS</h1>
                        <h2 className="text-4xl font-bold mb-4 bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text text-transparent">
                            Welcome to the Entity Core
                        </h2>
                        <p className="text-xl text-gray-300 max-w-3xl mx-auto">
                            Advanced AI-Powered Paranormal Evidence Analysis & Global Community Collaboration
                        </p>
                        {!userProfile?.isPro && (
                            <div className="mt-6 p-4 bg-yellow-900 bg-opacity-30 rounded-lg border border-yellow-500 max-w-2xl mx-auto">
                                <p className="text-yellow-300 mb-3">
                                    <i className="fas fa-eye mr-2"></i>
                                    FREE PLAN: You can view and browse content. Upgrade to Pro for analysis, investigations, and collaboration features!
                                </p>
                                <button onClick={handleUpgradeToPro} className="bg-yellow-600 hover:bg-yellow-700 text-black px-6 py-2 rounded font-semibold transition-all">
                                    Upgrade to Pro - $19.99/month
                                </button>
                            </div>
                        )}
                    </div>

                    <div className="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
                        <div className="bg-gradient-to-br from-purple-900 to-purple-800 p-6 rounded-lg border border-purple-500">
                            <div className="text-3xl mb-2">üìä</div>
                            <h3 className="text-lg font-semibold mb-1">Total Cases</h3>
                            <p className="text-3xl font-bold text-purple-300">{mockCases.length}</p>
                        </div>
                        <div className="bg-gradient-to-br from-pink-900 to-pink-800 p-6 rounded-lg border border-pink-500">
                            <div className="text-3xl mb-2">üîç</div>
                            <h3 className="text-lg font-semibold mb-1">Anomalies Detected</h3>
                            <p className="text-3xl font-bold text-pink-300">19</p>
                        </div>
                        <div className="bg-gradient-to-br from-blue-900 to-blue-800 p-6 rounded-lg border border-blue-500">
                            <div className="text-3xl mb-2">üéµ</div>
                            <h3 className="text-lg font-semibold mb-1">EVPs Captured</h3>
                            <p className="text-3xl font-bold text-blue-300">8</p>
                        </div>
                        <div className="bg-gradient-to-br from-green-900 to-green-800 p-6 rounded-lg border border-green-500">
                            <div className="text-3xl mb-2">üåç</div>
                            <h3 className="text-lg font-semibold mb-1">Global Locations</h3>
                            <p className="text-3xl font-bold text-green-300">{mockHauntedLocations.length}</p>
                        </div>
                    </div>

                    <div className="grid grid-cols-1 lg:grid-cols-2 gap-8">
                        <div className="bg-gray-900 bg-opacity-50 p-6 rounded-lg border border-gray-700">
                            <h3 className="text-xl font-semibold mb-4 text-purple-300">Recent Investigations</h3>
                            <div className="space-y-4">
                                {mockCases.map(case_ => (
                                    <div key={case_.id} className="bg-gray-800 p-4 rounded border border-gray-600">
                                        <h4 className="font-semibold text-white">{case_.name}</h4>
                                        <p className="text-sm text-gray-400">{case_.location} ‚Ä¢ {case_.date}</p>
                                        <div className="flex flex-wrap gap-1 mt-2">
                                            {case_.collaborators.map(collab => (
                                                <span key={collab} className="bg-purple-600 text-xs px-2 py-1 rounded">
                                                    {collab}
                                                </span>
                                            ))}
                                        </div>
                                        <div className="flex justify-between items-center mt-3 text-sm">
                                            <span className="text-yellow-400">{case_.anomalies} anomalies</span>
                                            <span className="text-blue-400">{case_.evps} EVPs</span>
                                            <span className={`px-2 py-1 rounded text-xs ${case_.status === 'analyzed' ? 'bg-green-600' : 'bg-yellow-600'}`}>
                                                {case_.status}
                                            </span>
                                        </div>
                                    </div>
                                ))}
                            </div>
                        </div>

                        <div className="bg-gray-900 bg-opacity-50 p-6 rounded-lg border border-gray-700">
                            <h3 className="text-xl font-semibold mb-4 text-purple-300">Global Hotspots</h3>
                            <div className="space-y-4">
                                {mockHauntedLocations.map(location => (
                                    <div key={location.id} className="bg-gray-800 p-4 rounded border border-gray-600">
                                        <div className="flex justify-between items-start">
                                            <h4 className="font-semibold text-white">{location.name}</h4>
                                            <span className={`px-2 py-1 rounded text-xs ${
                                                location.activityLevel === 'extreme' ? 'bg-red-600' : 'bg-orange-600'
                                            }`}>
                                                {location.activityLevel}
                                            </span>
                                        </div>
                                        <p className="text-sm text-gray-400 mt-1">{location.location}</p>
                                        <div className="flex justify-between text-xs text-gray-500 mt-2">
                                            <span>{location.evidenceCount} evidence</span>
                                            <span>{location.investigators} investigators</span>
                                        </div>
                                        <button 
                                            onClick={() => handleJoinInvestigation(location.name)}
                                            className={`mt-2 w-full py-1 rounded text-sm transition-all ${
                                                userProfile?.isPro 
                                                    ? 'bg-purple-500 hover:bg-purple-600 text-white' 
                                                    : 'bg-gray-600 text-gray-300 cursor-not-allowed'
                                            }`}
                                        >
                                            {userProfile?.isPro ? 'Join Investigation' : 'üîí Pro Only'}
                                        </button>
                                    </div>
                                ))}
                            </div>
                        </div>
                    </div>
                </div>
            );

            const UploadView = () => (
                <div className="space-y-8">
                    <div className="text-center">
                        <h1 className="text-4xl font-bold mb-4 text-purple-300">Evidence Upload</h1>
                        {!userProfile?.isPro && (
                            <div className="mb-6 p-4 bg-red-900 bg-opacity-30 rounded-lg border border-red-500 max-w-2xl mx-auto">
                                <p className="text-red-300">
                                    <i className="fas fa-lock mr-2"></i>
                                    üîí PRO FEATURE: Upload and analysis requires Pro subscription ($19.99/month)
                                </p>
                            </div>
                        )}
                    </div>

                    <div className={`bg-gray-900 bg-opacity-50 p-8 rounded-lg border border-gray-700 text-center ${!userProfile?.isPro ? 'pro-only-overlay opacity-50' : ''}`}>
                        <div className="text-6xl mb-4">üìÅ</div>
                        <h3 className="text-2xl font-semibold mb-4">Upload Your Evidence</h3>
                        <p className="text-gray-400 mb-6">Drag and drop video files or click to browse</p>
                        
                        <input 
                            type="file" 
                            multiple 
                            accept="video/*,audio/*,image/*" 
                            onChange={handleFileUpload}
                            className="hidden" 
                            id="file-upload"
                            disabled={!userProfile?.isPro}
                        />
                        <label 
                            htmlFor="file-upload" 
                            className={`${userProfile?.isPro ? 'bg-purple-500 hover:bg-purple-600 cursor-pointer' : 'bg-gray-600 cursor-not-allowed'} text-white px-8 py-3 rounded-lg font-semibold transition-all inline-block`}
                        >
                            {userProfile?.isPro ? 'Select Files' : 'üîí Pro Only'}
                        </label>
                    </div>

                    {uploadedFiles.length > 0 && userProfile?.isPro && (
                        <div className="bg-gray-900 bg-opacity-50 p-6 rounded-lg border border-gray-700">
                            <h3 className="text-xl font-semibold mb-4">Uploaded Files</h3>
                            <div className="space-y-2">
                                {uploadedFiles.map((file, index) => (
                                    <div key={index} className="flex justify-between items-center bg-gray-800 p-3 rounded">
                                        <span className="text-white">{file.name}</span>
                                        <span className="text-gray-400">{(file.size / 1024 / 1024).toFixed(2)} MB</span>
                                    </div>
                                ))}
                            </div>
                            <button 
                                onClick={performAnalysis}
                                className="mt-4 w-full bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white py-3 rounded-lg font-semibold transition-all"
                            >
                                Start AI Analysis
                            </button>
                        </div>
                    )}
                </div>
            );

            const AnalysisView = () => (
                <div className="space-y-8">
                    <div className="text-center">
                        <h1 className="ai-analysis-title mb-4">AI PARANORMAL ANALYSIS</h1>
                        {!userProfile?.isPro && (
                            <div className="mb-6 p-4 bg-red-900 bg-opacity-30 rounded-lg border border-red-500 max-w-2xl mx-auto">
                                <p className="text-red-300">
                                    <i className="fas fa-lock mr-2"></i>
                                    üîí PRO FEATURE: AI Analysis requires Pro subscription ($19.99/month)
                                </p>
                            </div>
                        )}
                    </div>

                    {isAnalyzing && userProfile?.isPro && (
                        <div className="bg-gray-900 bg-opacity-50 p-8 rounded-lg border border-gray-700 text-center">
                            <div className="text-6xl mb-4">üîÆ</div>
                            <h3 className="text-2xl font-semibold mb-4">Analyzing Evidence...</h3>
                            <p className="text-gray-400">The Entity is scanning for paranormal activity</p>
                            <div className="mt-4 w-full bg-gray-700 rounded-full h-2">
                                <div className="bg-gradient-to-r from-purple-500 to-pink-500 h-2 rounded-full animate-pulse" style={{width: '60%'}}></div>
                            </div>
                        </div>
                    )}

                    {analysisResults && userProfile?.isPro && (
                        <div className="space-y-6">
                            <div className="bg-gray-900 bg-opacity-50 p-6 rounded-lg border border-gray-700">
                                <h3 className="text-xl font-semibold mb-4 text-purple-300">üé• Video Anomalies</h3>
                                <div className="space-y-3">
                                    {analysisResults.videoAnomalies.map((anomaly, index) => (
                                        <div key={index} className="bg-gray-800 p-4 rounded border border-gray-600">
                                            <div className="flex justify-between items-center">
                                                <div>
                                                    <h4 className="font-semibold text-white">{anomaly.type}</h4>
                                                    <p className="text-sm text-gray-400">at {anomaly.timestamp}</p>
                                                </div>
                                                <div className="text-right">
                                                    <p className="text-lg font-bold text-white">{anomaly.confidence}%</p>
                                                    <div className={`w-16 h-2 rounded-full ${
                                                        anomaly.confidence > 80 ? 'bg-red-500' :
                                                        anomaly.confidence > 60 ? 'bg-yellow-500' : 'bg-green-500'
                                                    }`}></div>
                                                </div>
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            </div>

                            <div className="bg-gray-900 bg-opacity-50 p-6 rounded-lg border border-gray-700">
                                <h3 className="text-xl font-semibold mb-4 text-purple-300">üéµ Audio Analysis (EVP)</h3>
                                <div className="space-y-3">
                                    {analysisResults.audioAnomalies.map((anomaly, index) => (
                                        <div key={index} className="bg-gray-800 p-4 rounded border border-gray-600">
                                            <div className="flex justify-between items-center">
                                                <div>
                                                    <h4 className="font-semibold text-white">"{anomaly.text}"</h4>
                                                    <p className="text-sm text-gray-400">at {anomaly.timestamp}</p>
                                                </div>
                                                <div className="flex items-center space-x-3">
                                                    <span className="text-lg font-bold text-white">{anomaly.confidence}%</span>
                                                    <button className="bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded text-sm transition-all">
                                                        Play
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            </div>
                        </div>
                    )}

                    {!userProfile?.isPro && (
                        <div className="bg-gray-900 bg-opacity-50 p-8 rounded-lg border border-gray-700 text-center">
                            <div className="text-6xl mb-4">üîí</div>
                            <h3 className="text-2xl font-semibold mb-4">Pro Feature Required</h3>
                            <p className="text-gray-400 mb-6">Advanced AI analysis is available for Pro members only</p>
                            <button onClick={handleUpgradeToPro} className="bg-purple-500 hover:bg-purple-600 text-white px-8 py-3 rounded-lg font-semibold transition-all">
                                Upgrade to Pro - $19.99/month
                            </button>
                        </div>
                    )}
                </div>
            );

            const renderCurrentView = () => {
                switch(currentView) {
                    case 'dashboard': return <Dashboard />;
                    case 'upload': return <UploadView />;
                    case 'analysis': return <AnalysisView />;
                    case 'maps': return <div className="text-center py-20"><h1 className="text-4xl text-purple-300">Maps View</h1><p className="text-gray-400 mt-4">{userProfile?.isPro ? 'Global paranormal map coming soon...' : 'üîí Pro feature - Upgrade to access global maps'}</p></div>;
                    case 'community': return <div className="text-center py-20"><h1 className="text-4xl text-purple-300">Community Hub</h1><p className="text-gray-400 mt-4">{userProfile?.isPro ? 'Community features coming soon...' : 'üîí Pro feature - Upgrade to join the community'}</p></div>;
                    case 'cases': return <div className="text-center py-20"><h1 className="text-4xl text-purple-300">Case Files</h1><p className="text-gray-400 mt-4">Case management system coming soon...</p></div>;
                    default: return <Dashboard />;
                }
            };

            return (
                <div className="min-h-screen bg-black text-white">
                    <Navigation />
                    <main className="container mx-auto px-4 py-8">
                        {renderCurrentView()}
                    </main>
                    
                    {!userProfile?.isPro && (
                        <div className="fixed bottom-4 right-4 bg-gradient-to-r from-purple-600 to-pink-600 p-4 rounded-lg shadow-lg max-w-sm z-40">
                            <h3 className="font-bold text-sm">üöÄ Upgrade to Entity Pro</h3>
                            <p className="text-xs opacity-90">‚Ä¢ Unlimited AI analysis<br />‚Ä¢ Join investigations<br />‚Ä¢ Global map access<br />‚Ä¢ Community collaboration</p>
                            <button onClick={handleUpgradeToPro} className="mt-2 bg-white text-purple-600 px-3 py-1 rounded text-xs font-semibold hover:bg-gray-100 transition-all">
                                Subscribe $19.99/month
                            </button>
                        </div>
                    )}
                </div>
            );
        }

        try {
            ReactDOM.render(<App />, document.getElementById('root'));
        } catch(error) {
            document.getElementById('error-container').style.display = 'block';
            document.getElementById('error-container').innerHTML = 'Error loading app: ' + error.message;
        }

        window.addEventListener('error', function(event) {
            document.getElementById('error-container').style.display = 'block';
            document.getElementById('error-container').innerHTML += '<br>Runtime error: ' + event.message;
        });
    </script>
</body>
</html>'''

# Write the HTML file
with open('index.html', 'w', encoding='utf-8') as f:
    f.write(html_content)

print("‚úÖ Updated index.html created successfully!")
print("\nüî• KEY UPDATES:")
print("‚Ä¢ Pure BLACK background (#000000)")
print("‚Ä¢ REGISTRATION REQUIRED - No access without account")
print("‚Ä¢ FREE users can VIEW content but need Pro for:")
print("  - Video/Audio analysis")
print("  - Joining investigations") 
print("  - File uploads")
print("  - Community features")
print("‚Ä¢ 'AI PARANORMAL ANALYSIS' in HUGE neon green/yellow font")
print("‚Ä¢ Clear Pro upgrade prompts throughout")
print("\nüìÅ Ready to upload to GitHub!")
